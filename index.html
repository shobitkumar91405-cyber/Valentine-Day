<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SIVA SINGH - FREE FIRE MAX HTML</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; }
        #ui { position: absolute; width: 100%; height: 100%; pointer-events: none; }
        
        /* Stats Styling */
        .hud { position: absolute; padding: 15px; color: white; background: rgba(0,0,0,0.6); border-radius: 10px; border-left: 5px solid #ffcc00; }
        #top-left { top: 20px; left: 20px; }
        #bottom-right { bottom: 20px; right: 20px; text-align: right; }
        
        /* Health Bar */
        .bar-container { width: 200px; height: 15px; background: #333; margin-top: 5px; border: 1px solid #fff; }
        #hp-fill { width: 100%; height: 100%; background: linear-gradient(90deg, #ff0000, #ff6666); transition: 0.3s; }
        
        /* Crosshair */
        #crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #0f0; font-size: 24px; font-weight: bold; }
        
        #watermark { position: absolute; top: 10px; width: 100%; text-align: center; color: rgba(255,255,255,0.3); font-size: 50px; font-weight: 900; z-index: -1; }
        
        #game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.9); color: gold; padding: 50px; text-align: center; display: none; border: 4px solid #ffcc00; pointer-events: all; }
        button { background: #ffcc00; border: none; padding: 10px 25px; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>

<div id="ui">
    <div id="watermark">MADE BY SIVASINGH</div>
    
    <div id="top-left" class="hud">
        <div style="font-weight: bold; font-size: 18px; color: #ffcc00;">SIVASINGH SURVIVOR</div>
        <div>HP:</div>
        <div class="bar-container"><div id="hp-fill"></div></div>
        <div style="margin-top:10px;">KILLS: <span id="kills">0</span></div>
    </div>

    <div id="bottom-right" class="hud">
        <div style="font-size: 24px;">AMMO: <span id="ammo">30</span>/90</div>
        <div style="font-size: 12px; color: #aaa;">PRESS 'R' TO RELOAD</div>
    </div>

    <div id="crosshair">+</div>
</div>

<div id="game-over">
    <h1>BOOYAH!</h1>
    <p>SivaSingh, aapne maidaan maar liya!</p>
    <p>Final Kills: <span id="final-kills">0</span></p>
    <button onclick="location.reload()">PLAY AGAIN</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene, camera, renderer, player, clock;
let bullets = [], enemies = [], obstacles = [];
let keys = {}, ammo = 30, health = 100, kills = 0, isJumping = false, vVel = 0;

function init() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x131d29);
    scene.fog = new THREE.Fog(0x131d29, 10, 80);
    clock = new THREE.Clock();

    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Lights
    scene.add(new THREE.AmbientLight(0xffffff, 0.4));
    const sun = new THREE.PointLight(0xffaa00, 1, 100);
    sun.position.set(10, 20, 10);
    scene.add(sun);

    // Ground
    const ground = new THREE.Mesh(new THREE.PlaneGeometry(200, 200), new THREE.MeshStandardMaterial({color: 0x1a2b1a}));
    ground.rotation.x = -Math.PI/2;
    scene.add(ground);

    // Player with Gun
    player = new THREE.Group();
    const body = new THREE.Mesh(new THREE.CapsuleGeometry(0.5, 1, 4, 8), new THREE.MeshStandardMaterial({color: 0x2244ff}));
    const gun = new THREE.Mesh(new THREE.BoxGeometry(0.2, 0.2, 1), new THREE.MeshStandardMaterial({color: 0x111}));
    gun.position.set(0.4, 0.5, -0.8);
    player.add(body, gun);
    player.position.y = 1.5;
    scene.add(player);

    // Add Obstacles (Buildings/Boxes)
    for(let i=0; i<15; i++) {
        let h = Math.random()*5 + 2;
        let box = new THREE.Mesh(new THREE.BoxGeometry(4, h, 4), new THREE.MeshStandardMaterial({color: 0x444444}));
        box.position.set(Math.random()*80-40, h/2, Math.random()*80-40);
        scene.add(box);
        obstacles.push(box);
    }

    // Controls
    window.addEventListener('keydown', e => {
        keys[e.code] = true;
        if(e.code === 'KeyR') { ammo = 30; updateUI(); }
        if(e.code === 'Space' && !isJumping) { vVel = 0.2; isJumping = true; }
    });
    window.addEventListener('keyup', e => keys[e.code] = false);
    window.addEventListener('mousedown', shoot);

    setInterval(spawnEnemy, 2500);
    animate();
}

function shoot() {
    if(ammo <= 0) return;
    ammo--; updateUI();
    const b = new THREE.Mesh(new THREE.SphereGeometry(0.15), new THREE.MeshBasicMaterial({color: 0xffff00}));
    b.position.copy(player.position);
    b.position.y += 0.5;
    const dir = new THREE.Vector3(0, 0, -1).applyQuaternion(player.quaternion);
    b.userData = { velocity: dir.multiplyScalar(1.5) };
    bullets.push(b);
    scene.add(b);
}

function spawnEnemy() {
    const enemy = new THREE.Mesh(new THREE.BoxGeometry(1.2, 2.2, 1.2), new THREE.MeshStandardMaterial({color: 0xff3300}));
    const dist = 40; const ang = Math.random()*Math.PI*2;
    enemy.position.set(Math.cos(ang)*dist, 1.1, Math.sin(ang)*dist);
    enemies.push(enemy);
    scene.add(enemy);
}

function updateUI() {
    document.getElementById('hp-fill').style.width = health + "%";
    document.getElementById('ammo').innerText = ammo;
    document.getElementById('kills').innerText = kills;
}

function animate() {
    if(health <= 0) return;
    requestAnimationFrame(animate);

    // Movement Logic
    let speed = keys['ShiftLeft'] ? 0.3 : 0.15;
    if(keys['KeyW']) player.translateZ(-speed);
    if(keys['KeyS']) player.translateZ(speed);
    if(keys['KeyA']) player.rotation.y += 0.04;
    if(keys['KeyD']) player.rotation.y -= 0.04;

    // Jump Physics
    player.position.y += vVel;
    if(player.position.y > 1.5) vVel -= 0.01;
    else { player.position.y = 1.5; vVel = 0; isJumping = false; }

    // Camera follow
    let camPos = new THREE.Vector3(0, 6, 12).applyQuaternion(player.quaternion).add(player.position);
    camera.position.lerp(camPos, 0.1);
    camera.lookAt(player.position);

    // Bullet collision
    bullets.forEach((b, i) => {
        b.position.add(b.userData.velocity);
        enemies.forEach((e, ei) => {
            if(b.position.distanceTo(e.position) < 1.5) {
                scene.remove(e); enemies.splice(ei, 1);
                scene.remove(b); bullets.splice(i, 1);
                kills++; updateUI();
            }
        });
        if(b.position.length() > 100) { scene.remove(b); bullets.splice(i, 1); }
    });

    // Enemy AI
    enemies.forEach(e => {
        e.lookAt(player.position);
        e.translateZ(0.06);
        if(e.position.distanceTo(player.position) < 1.5) {
            health -= 0.5; updateUI();
            if(health <= 0) {
                document.getElementById('game-over').style.display = 'block';
                document.getElementById('final-kills').innerText = kills;
            }
        }
    });

    renderer.render(scene, camera);
}

init();
</script>
</body>
</html>
