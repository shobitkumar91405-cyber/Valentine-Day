<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Last Chapter - Heartbreak</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap');

        :root {
            --bg-dark: #0b0e14;
            --heart-red: #ff4d6d;
            --heart-dark: #800f2f;
            --text-gray: #a0a0a0;
            --accent-red: #c9184a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background-color: var(--bg-dark);
            color: #fff;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* --- Intro Screen --- */
        #intro-screen {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: radial-gradient(circle at center, #1a1a2e 0%, #0b0e14 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 1.5s ease;
        }

        canvas#rain {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .scene-3d {
            width: 300px;
            height: 300px;
            perspective: 1000px;
            cursor: pointer;
            z-index: 10;
        }

        .heart-3d {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 75px auto;
            transform-style: preserve-3d;
            animation: rotateHeart 10s linear infinite, pulseHeart 2s ease-in-out infinite;
            transition: transform 0.3s ease;
        }

        @keyframes rotateHeart {
            0% { transform: rotateY(0deg) rotateX(10deg); }
            100% { transform: rotateY(360deg) rotateX(10deg); }
        }

        @keyframes pulseHeart {
            0%, 100% { transform: scale(1) rotateY(var(--rotY, 0deg)); }
            50% { transform: scale(1.1) rotateY(var(--rotY, 0deg)); }
        }

        .heart-part {
            position: absolute;
            width: 100px;
            height: 100px;
            background: var(--heart-red);
            border-radius: 50% 50% 0 0;
            box-shadow: 0 0 40px var(--accent-red);
        }

        .heart-part.left { transform: rotate(-45deg) translateX(-50px); }
        .heart-part.right { transform: rotate(45deg) translateX(50px); }

        /* Proposal Section */
        #proposal-ui {
            display: none;
            text-align: center;
            z-index: 20;
            animation: fadeIn 2s ease;
        }

        .proposal-text {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-shadow: 0 0 20px rgba(255, 77, 109, 0.5);
            line-height: 1.4;
        }

        .btn-group {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.3s;
            font-weight: 600;
        }

        .btn-yes { background: #ff4d6d; color: white; box-shadow: 0 0 20px rgba(255, 77, 109, 0.4); }
        .btn-breakup { background: #2b2d42; color: #8d99ae; border: 1px solid #454545; }

        /* --- Breakup Main Website --- */
        #breakup-website {
            display: none;
            height: 100vh;
            overflow-y: auto;
            background: #050505;
            padding: 50px 20px;
            scrollbar-width: none;
        }

        .section {
            max-width: 800px;
            margin: 100px auto;
            text-align: center;
        }

        /* Cracked Heart */
        .broken-heart-container {
            height: 200px;
            position: relative;
            margin-bottom: 50px;
        }

        .piece {
            position: absolute;
            width: 80px;
            height: 120px;
            background: #4a0404;
            clip-path: polygon(100% 0, 0 0, 100% 100%);
            transition: 2s ease-in-out;
        }

        /* Typewriter */
        .typewriter {
            font-size: 1.8rem;
            color: #cfcfcf;
            font-family: 'Playfair Display', serif;
            font-style: italic;
            min-height: 3em;
        }

        /* Fake Chat */
        .chat-container {
            background: #0e0e0e;
            border: 1px solid #1a1a1a;
            border-radius: 15px;
            padding: 20px;
            text-align: left;
            margin: 40px auto;
            max-width: 400px;
        }

        .chat-msg {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
        }

        .sent { background: #1f1f1f; margin-left: auto; color: #eee; }
        .status { font-size: 0.7rem; color: #666; text-align: right; margin-top: 5px; }

        /* Memories */
        .memories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 40px 0;
        }

        .memory-card {
            aspect-ratio: 1/1;
            background: #1a1a1a;
            border: 1px solid #222;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            filter: grayscale(100%) brightness(0.7);
            transition: 0.5s;
        }

        .memory-card:hover {
            filter: grayscale(0%) brightness(1);
            transform: scale(1.05);
        }

        .memory-card img { width: 100%; height: 100%; object-fit: cover; }

        /* Socials */
        .socials {
            border-top: 1px solid #222;
            padding-top: 50px;
        }

        .insta-link {
            display: block;
            color: var(--accent-red);
            text-decoration: none;
            margin: 10px 0;
            font-size: 1.1rem;
        }

        /* Final Goodbye */
        #final-goodbye {
            position: fixed;
            inset: 0;
            background: black;
            z-index: 2000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* Utils */
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3" type="audio/mpeg">
    </audio>

    <div id="intro-screen">
        <canvas id="rain"></canvas>
        
        <div class="scene-3d" id="heart-trigger">
            <div class="heart-3d" id="main-heart">
                <div class="heart-part left"></div>
                <div class="heart-part right"></div>
            </div>
        </div>

        <div id="proposal-ui">
            <h1 class="proposal-text">
                Aarvi ji<br>
                <span style="font-size: 1.2rem; color: var(--text-gray);">Welcome to SivaSingh‚Äôs heart üíñ</span><br>
                I want to say I love you...<br>
                Do you love me?
            </h1>
            <div class="btn-group">
                <button class="btn btn-yes" onclick="handleYes()">YES ‚ù§Ô∏è</button>
                <button class="btn btn-breakup" onclick="handleBreakup()">BREAKUP üíî</button>
            </div>
        </div>
    </div>

    <div id="breakup-website">
        <div class="section">
            <div class="broken-heart-container" id="broken-heart-anim">
                </div>
            <div class="typewriter" id="sad-quotes"></div>
        </div>

        <div class="section">
            <div class="chat-container">
                <div class="chat-msg sent">
                    Tum ab bhi yaad aati ho...
                    <div class="status">Seen ‚úî‚úî</div>
                </div>
                <div class="status" style="text-align: center; width: 100%;">Last seen long ago</div>
            </div>
        </div>

        <div class="section">
            <h3>Memories fading away...</h3>
            <div class="memories-grid">
                <div class="memory-card"><img src="photo1.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo2.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo3.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo4.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo5.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo6.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo7.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo8.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo9.jpg" alt="Memory"></div>
                <div class="memory-card"><img src="photo10.jpg" alt="Memory"></div>
            </div>
        </div>

        <div class="section socials">
            <p>Some paths are never meant to cross again.</p>
            <a href="https://instagram.com/smss1708" class="insta-link">üì∏ @smss1708</a>
            <a href="https://instagram.com/black_its_me20" class="insta-link">üì∏ @black_its_me20</a>
            
            <button class="btn btn-breakup" style="margin-top: 50px;" onclick="showFinalGoodbye()">Let You Go ü•Ä</button>
        </div>
    </div>

    <div id="final-goodbye">
        <h1 class="proposal-text">Aaj bhi pyaar hai...<br>Par ab haq nahi...</h1>
        <p style="color: #444;">Goodbye, Forever.</p>
    </div>

    <script>
        const canvas = document.getElementById('rain');
        const ctx = canvas.getContext('2d');
        const heartTrigger = document.getElementById('heart-trigger');
        const proposalUI = document.getElementById('proposal-ui');
        const mainHeart = document.getElementById('main-heart');
        const bgMusic = document.getElementById('bg-music');

        // Rain Effect
        let w, h;
        let rainDrops = [];

        function initRain() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            rainDrops = Array(300).fill().map(() => ({
                x: Math.random() * w,
                y: Math.random() * h,
                l: Math.random() * 20,
                s: Math.random() * 10 + 5
            }));
        }

        function drawRain() {
            ctx.clearRect(0, 0, w, h);
            ctx.strokeStyle = 'rgba(174, 194, 224, 0.2)';
            ctx.lineWidth = 1;
            rainDrops.forEach(d => {
                ctx.beginPath();
                ctx.moveTo(d.x, d.y);
                ctx.lineTo(d.x, d.y + d.l);
                ctx.stroke();
                d.y += d.s;
                if (d.y > h) d.y = -20;
            });
            requestAnimationFrame(drawRain);
        }

        window.addEventListener('resize', initRain);
        initRain();
        drawRain();

        // Heart Click Interaction
        heartTrigger.onclick = () => {
            document.body.classList.add('shake');
            setTimeout(() => document.body.classList.remove('shake'), 500);
            
            heartTrigger.style.display = 'none';
            proposalUI.style.display = 'block';
            
            // Generate particle hearts
            for(let i=0; i<30; i++) createParticle(window.innerWidth/2, window.innerHeight/2);
        };

        function createParticle(x, y) {
            const p = document.createElement('div');
            p.innerHTML = '‚ù§Ô∏è';
            p.style.position = 'fixed';
            p.style.left = x + 'px';
            p.style.top = y + 'px';
            p.style.fontSize = Math.random() * 20 + 10 + 'px';
            p.style.pointerEvents = 'none';
            p.style.zIndex = '100';
            document.body.appendChild(p);

            const destX = x + (Math.random() - 0.5) * 500;
            const destY = y + (Math.random() - 0.5) * 500;

            p.animate([
                { transform: 'translate(0,0) scale(1)', opacity: 1 },
                { transform: `translate(${destX - x}px, ${destY - y}px) scale(0)`, opacity: 0 }
            ], { duration: 2000, easing: 'ease-out' }).onfinish = () => p.remove();
        }

        // Logic Flows
        function handleYes() {
            alert("She said YES üíñ");
            location.reload(); // In a real app, you'd load the 'Love' version here
        }

        function handleBreakup() {
            bgMusic.play().catch(() => console.log("Audio needs interaction"));
            
            const intro = document.getElementById('intro-screen');
            intro.style.background = '#000';
            
            // Intensify rain logic
            rainDrops.forEach(d => d.s *= 2);
            
            // Transition to Breakup Site
            setTimeout(() => {
                intro.style.opacity = '0';
                setTimeout(() => {
                    intro.style.display = 'none';
                    const breakupSite = document.getElementById('breakup-website');
                    breakupSite.style.display = 'block';
                    initBreakupContent();
                }, 1500);
            }, 1000);
        }

        function initBreakupContent() {
            // Create Cracked Heart pieces
            const container = document.getElementById('broken-heart-anim');
            for(let i=0; i<6; i++) {
                const p = document.createElement('div');
                p.className = 'piece';
                p.style.left = '50%';
                p.style.top = '20%';
                p.style.transform = `translateX(-50%) rotate(${i * 60}deg)`;
                container.appendChild(p);
                
                // Animate break
                setTimeout(() => {
                    p.style.transform = `translate(${(Math.random()-0.5)*300}px, ${500 + Math.random()*200}px) rotate(${Math.random()*360}deg)`;
                    p.style.opacity = '0';
                }, 1000 + (i*200));
            }

            // Typewriter Effect
            const quotes = [
                "Kuch log sirf yaadon mein reh jaate hain...",
                "Hum chaah kar bhi tumhare nahi rahe...",
                "Mohabbat aaj bhi hai, par ab saath nahi..."
            ];
            let qIdx = 0;
            const typewriter = document.getElementById('sad-quotes');
            
            function type() {
                let charIdx = 0;
                typewriter.innerHTML = "";
                const interval = setInterval(() => {
                    typewriter.innerHTML += quotes[qIdx][charIdx];
                    charIdx++;
                    if(charIdx >= quotes[qIdx].length) {
                        clearInterval(interval);
                        setTimeout(() => {
                            qIdx = (qIdx + 1) % quotes.length;
                            type();
                        }, 3000);
                    }
                }, 100);
            }
            type();
        }

        function showFinalGoodbye() {
            const final = document.getElementById('final-goodbye');
            final.style.display = 'flex';
            final.animate([{opacity: 0}, {opacity: 1}], 2000);
            
            setTimeout(() => {
                document.body.innerHTML = "";
                document.body.style.background = "black";
            }, 5000);
        }
    </script>
</body>
</html>
